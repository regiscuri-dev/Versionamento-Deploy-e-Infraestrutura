const THEME_KEY='app.theme'; const CONTRAST_KEY='app.contrast';
export function initTheme(){ const btn=document.getElementById('themeToggle'); const current=localStorage.getItem(THEME_KEY)||(window.matchMedia('(prefers-color-scheme: dark)').matches?'dark':'light'); setTheme(current); btn?.addEventListener('click',()=>{ const next=document.documentElement.dataset.theme==='dark'?'light':'dark'; setTheme(next); btn.setAttribute('aria-pressed', String(next==='dark')); }); }
export function initHighContrast(){ const btn=document.getElementById('contrastToggle'); const current=localStorage.getItem(CONTRAST_KEY)||'off'; setContrast(current==='on'); btn?.addEventListener('click',()=>{ const active=document.documentElement.dataset.contrast==='high'?false:true; setContrast(active); btn.setAttribute('aria-pressed', String(active)); }); }
function setTheme(mode){ document.documentElement.dataset.theme=mode; if(mode==='light'){ document.documentElement.style.setProperty('--bg','#f7f7fb'); document.documentElement.style.setProperty('--text','#1e1e25'); document.documentElement.style.setProperty('--muted','#5b5b66'); document.documentElement.style.setProperty('--card','#ffffff'); } else { document.documentElement.style.removeProperty('--bg'); document.documentElement.style.removeProperty('--text'); document.documentElement.style.removeProperty('--muted'); document.documentElement.style.removeProperty('--card'); } localStorage.setItem(THEME_KEY, mode); }
function setContrast(on){ if(on){ document.documentElement.dataset.contrast='high'; localStorage.setItem(CONTRAST_KEY,'on'); } else { document.documentElement.dataset.contrast=''; localStorage.setItem(CONTRAST_KEY,'off'); } }
